<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, shrink-to-fit=no">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Course Form | Course Management System</title>

    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <!-- Font Awesome Icons -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <!-- Main CSS -->
    <link th:href="@{/css/main.css}" rel="stylesheet">
</head>
<body>
    <nav th:insert="fragments/navbar :: navbar"></nav>

    <!-- Page Header -->
    <div class="page-header">
        <div class="container">
            <nav aria-label="breadcrumb" class="breadcrumb-modern">
                <ol class="breadcrumb">
                    <li class="breadcrumb-item">
                        <a th:href="@{/}">
                            <i class="fas fa-home me-1"></i>Dashboard
                        </a>
                    </li>
                    <li class="breadcrumb-item">
                        <a th:href="@{/course}">Courses</a>
                    </li>
                    <li class="breadcrumb-item active" aria-current="page" 
                        th:text="${isNew} ? 'Add New Course' : 'Update Course'">
                        Add New Course
                    </li>
                </ol>
            </nav>
            <h1 class="h2 mb-0">
                <i class="fas fa-book-open text-success me-2"></i>
                <span th:text="${isNew} ? 'Add New Course' : 'Update Course'">Add New Course</span>
            </h1>
        </div>
    </div>

    <!-- Main Content -->
    <div class="container mb-5">
        <div class="form-container">
            <div th:switch="${isNew}">
                <!-- Create Form -->
                <div th:case="true">
                    <div class="form-header">
                        <h2>
                            <i class="fas fa-plus-circle text-success me-2"></i>
                            Create New Course
                        </h2>
                        <p>Add a new course offering to the system</p>
                    </div>

                    <form th:action="@{/course/save}" th:object="${courseDTO}" method="POST" novalidate>
                        <div class="row">
                            <div class="col-md-4">
                                <div class="form-group">
                                    <label for="code" class="form-label-modern">Course Code</label>
                                    <div class="input-icon">
                                        <i class="fas fa-hashtag"></i>
                                        <input id="code" type="text" th:field="*{code}" 
                                               class="form-control form-control-modern" 
                                               placeholder="e.g., CS101" maxlength="15">
                                    </div>
                                    <div class="form-help">Optional course identifier (max 15 characters)</div>
                                </div>
                            </div>
                            <div class="col-md-8">
                                <div class="form-group">
                                    <label for="name" class="form-label-modern required-field">Course Name</label>
                                    <div class="input-icon">
                                        <i class="fas fa-book"></i>
                                        <input id="name" type="text" th:field="*{name}" 
                                               class="form-control form-control-modern" 
                                               placeholder="Enter course name" required>
                                    </div>
                                    <div class="form-help">Full name of the course</div>
                                </div>
                            </div>
                        </div>

                        <div class="form-group">
                            <label for="description" class="form-label-modern">Description</label>
                            <div class="input-icon">
                                <i class="fas fa-align-left"></i>
                                <textarea id="description" th:field="*{description}" 
                                         class="form-control form-control-modern" 
                                         placeholder="Enter course description (optional)" 
                                         rows="3" style="padding-left: 2.75rem;"></textarea>
                            </div>
                            <div class="form-help">Brief description of what this course covers</div>
                        </div>

                        <div class="form-group">
                            <label for="school" class="form-label-modern required-field">School</label>
                            <div class="input-icon">
                                <i class="fas fa-school"></i>
                                <select id="school" th:field="*{schoolId}" 
                                        class="form-control form-control-modern" 
                                        style="padding-left: 2.75rem;" required>
                                    <option value="">Select a school...</option>
                                    <option th:each="school : ${schoolList}"
                                            th:value="${school.id}"
                                            th:text="${school.name}">School Name</option>
                                </select>
                            </div>
                            <div class="form-help">Choose the institution offering this course</div>
                            <div th:if="${preSelectedSchoolName}" class="alert alert-info mt-2" role="alert">
                                <i class="fas fa-info-circle me-2"></i>
                                <strong>School Pre-selected:</strong> Creating course for <span th:text="${preSelectedSchoolName}">School Name</span>
                            </div>
                        </div>

                        <div class="form-actions">
                            <button type="submit" class="btn btn-primary-modern">
                                <i class="fas fa-save"></i>
                                Create Course
                            </button>
                            <a th:href="@{/course}" class="btn btn-secondary-modern">
                                <i class="fas fa-times"></i>
                                Cancel
                            </a>
                        </div>
                    </form>
                </div>

                <!-- Update Form -->
                <div th:case="false">
                    <div class="form-header">
                        <h2>
                            <i class="fas fa-edit text-warning me-2"></i>
                            Update Course
                        </h2>
                        <p>Modify the course information</p>
                    </div>

                    <form th:action="@{'/course/update/' + ${courseId}}" th:object="${course}" 
                          th:method="PUT" novalidate>
                        <input name="_method" type="hidden" value="PUT"/>

                        <div class="row">
                            <div class="col-md-4">
                                <div class="form-group">
                                    <label for="codeForUpdate" class="form-label-modern">Course Code</label>
                                    <div class="input-icon">
                                        <i class="fas fa-hashtag"></i>
                                        <input id="codeForUpdate" type="text" th:field="*{code}" 
                                               class="form-control form-control-modern" 
                                               placeholder="e.g., CS101" maxlength="15">
                                    </div>
                                    <div class="form-help">Optional course identifier (max 15 characters)</div>
                                </div>
                            </div>
                            <div class="col-md-8">
                                <div class="form-group">
                                    <label for="nameForUpdate" class="form-label-modern required-field">Course Name</label>
                                    <div class="input-icon">
                                        <i class="fas fa-book"></i>
                                        <input id="nameForUpdate" type="text" th:field="*{name}" 
                                               class="form-control form-control-modern" 
                                               placeholder="Enter course name" required>
                                    </div>
                                    <div class="form-help">Full name of the course</div>
                                </div>
                            </div>
                        </div>

                        <div class="form-group">
                            <label for="descriptionForUpdate" class="form-label-modern">Description</label>
                            <div class="input-icon">
                                <i class="fas fa-align-left"></i>
                                <textarea id="descriptionForUpdate" th:field="*{description}" 
                                         class="form-control form-control-modern" 
                                         placeholder="Enter course description (optional)" 
                                         rows="3" style="padding-left: 2.75rem;"></textarea>
                            </div>
                            <div class="form-help">Brief description of what this course covers</div>
                        </div>

                        <div class="form-group">
                            <label for="schoolForUpdate" class="form-label-modern required-field">School</label>
                            <div class="input-icon">
                                <i class="fas fa-school"></i>
                                <select id="schoolForUpdate" th:field="*{schoolId}" 
                                        class="form-control form-control-modern" 
                                        style="padding-left: 2.75rem;" required>
                                    <option value="">Select a school...</option>
                                    <option th:each="school : ${schoolList}"
                                            th:value="${school.id}"
                                            th:text="${school.name}">School Name</option>
                                </select>
                            </div>
                            <div class="form-help">Choose the institution offering this course</div>
                        </div>

                        <div class="form-actions">
                            <button type="submit" class="btn btn-primary-modern">
                                <i class="fas fa-save"></i>
                                Update Course
                            </button>
                            <a th:href="@{/course}" class="btn btn-secondary-modern">
                                <i class="fas fa-times"></i>
                                Cancel
                            </a>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>

    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <!-- Main JS -->
    <script th:src="@{/js/main.js}"></script>
</body>
</html>